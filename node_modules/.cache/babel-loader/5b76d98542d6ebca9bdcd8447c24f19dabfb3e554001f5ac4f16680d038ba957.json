{"ast":null,"code":"import React,{Component}from'react';import*as d3 from'd3';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";class FileUpload extends Component{constructor(props){super(props);this.handleFileSubmit=event=>{event.preventDefault();const{selectedFile}=this.state;if(selectedFile){const fileReader=new FileReader();fileReader.onload=e=>{const csvText=e.target.result;const parsedJsonData=this.csvToJson(csvText);this.setState({parsedData:parsedJsonData});// Set parsed data to state\nthis.props.setUploadedData(parsedJsonData);};fileReader.readAsText(selectedFile);}};this.csvToJson=csvContent=>{const csvLines=csvContent.split(\"\\n\");// Split by new line to get rows\nconst columnHeaders=csvLines[0].split(\",\").map(h=>h.trim());// Split first row to get headers\nconst parsedDataArray=[];const dateParser=d3.timeParse(\"%Y-%m-%d\");// Parse dates in format YYYY-MM-DD\nfor(let rowIndex=1;rowIndex<csvLines.length;rowIndex++){if(!csvLines[rowIndex].trim())continue;// Skip empty lines\nconst rowValues=csvLines[rowIndex].split(\",\");// Split each line by comma\nconst rowObject={};// Map each column value to the corresponding header\ncolumnHeaders.forEach((columnName,columnIndex)=>{var _rowValues$columnInde;const cellValue=(_rowValues$columnInde=rowValues[columnIndex])===null||_rowValues$columnInde===void 0?void 0:_rowValues$columnInde.trim();// Parse Date column as Date object\nif(columnName==='Date'){rowObject[columnName]=dateParser(cellValue);}// Parse numeric columns as numbers\nelse if(['GPT-4','Gemini','PaLM-2','Claude','LLaMA-3.1'].includes(columnName)){rowObject[columnName]=parseFloat(cellValue);// Convert to number\n}// Keep other values as strings\nelse{rowObject[columnName]=cellValue;}});// Add object to result if it has valid data\nif(rowObject.Date&&!isNaN(rowObject['GPT-4'])){parsedDataArray.push(rowObject);}}console.log(\"Parsed CSV data:\",parsedDataArray);return parsedDataArray;};this.state={selectedFile:null,parsedData:null// Store the parsed CSV data\n};}render(){return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#f0f0f0\",padding:20},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Upload a CSV File\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleFileSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",onChange:event=>this.setState({selectedFile:event.target.files[0]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Upload\"})]})]});}}export default FileUpload;","map":{"version":3,"names":["React","Component","d3","jsx","_jsx","jsxs","_jsxs","FileUpload","constructor","props","handleFileSubmit","event","preventDefault","selectedFile","state","fileReader","FileReader","onload","e","csvText","target","result","parsedJsonData","csvToJson","setState","parsedData","setUploadedData","readAsText","csvContent","csvLines","split","columnHeaders","map","h","trim","parsedDataArray","dateParser","timeParse","rowIndex","length","rowValues","rowObject","forEach","columnName","columnIndex","_rowValues$columnInde","cellValue","includes","parseFloat","Date","isNaN","push","console","log","render","style","backgroundColor","padding","children","onSubmit","type","accept","onChange","files"],"sources":["C:/StarterCode/src/FileUpload.js"],"sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from 'd3';\n\nclass FileUpload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selectedFile: null,\n      parsedData: null,  // Store the parsed CSV data\n    };\n  }\n  \n  handleFileSubmit = (event) => {\n    event.preventDefault();\n    const { selectedFile } = this.state;\n    \n    if (selectedFile) {\n      const fileReader = new FileReader();\n      fileReader.onload = (e) => {\n        const csvText = e.target.result;\n        const parsedJsonData = this.csvToJson(csvText);\n        this.setState({ parsedData: parsedJsonData });  // Set parsed data to state\n        this.props.setUploadedData(parsedJsonData)\n      };\n      fileReader.readAsText(selectedFile);\n    }\n  };\n\n  csvToJson = (csvContent) => {\n    const csvLines = csvContent.split(\"\\n\");  // Split by new line to get rows\n    const columnHeaders = csvLines[0].split(\",\").map(h => h.trim()); // Split first row to get headers\n    const parsedDataArray = [];\n    const dateParser = d3.timeParse(\"%Y-%m-%d\"); // Parse dates in format YYYY-MM-DD\n\n    for (let rowIndex = 1; rowIndex < csvLines.length; rowIndex++) {\n      if (!csvLines[rowIndex].trim()) continue; // Skip empty lines\n      \n      const rowValues = csvLines[rowIndex].split(\",\"); // Split each line by comma\n      const rowObject = {};\n\n      // Map each column value to the corresponding header\n      columnHeaders.forEach((columnName, columnIndex) => {\n        const cellValue = rowValues[columnIndex]?.trim();\n        \n        // Parse Date column as Date object\n        if (columnName === 'Date') {\n          rowObject[columnName] = dateParser(cellValue);\n        } \n        // Parse numeric columns as numbers\n        else if (['GPT-4', 'Gemini', 'PaLM-2', 'Claude', 'LLaMA-3.1'].includes(columnName)) {\n          rowObject[columnName] = parseFloat(cellValue); // Convert to number\n        } \n        // Keep other values as strings\n        else {\n          rowObject[columnName] = cellValue;\n        }\n      });\n\n      // Add object to result if it has valid data\n      if (rowObject.Date && !isNaN(rowObject['GPT-4'])) {\n        parsedDataArray.push(rowObject);\n      }\n    }\n\n    console.log(\"Parsed CSV data:\", parsedDataArray);\n    return parsedDataArray;\n  };\n\n  render() {\n    return (\n      <div style={{ backgroundColor: \"#f0f0f0\", padding: 20 }}>\n        <h2>Upload a CSV File</h2>\n        <form onSubmit={this.handleFileSubmit}>\n          <input \n            type=\"file\" \n            accept=\".csv\" \n            onChange={(event) => this.setState({ selectedFile: event.target.files[0] })} \n          />\n          <button type=\"submit\">Upload</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default FileUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}